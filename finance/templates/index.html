{% extends "base_generic.html" %}
<style>
    body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
}

.sidebar {
    height: 100%;
    width: 200px;
    position: fixed;
    top: 0;
    left: 0;
    background-color: #111;
    padding-top: 20px;
}

.sidebar h2 {
    color: white;
    text-align: center;
}

.sidebar ul {
    list-style-type: none;
    padding: 0;
}

.sidebar ul li {
    padding: 10px;
    text-align: center;
}

.sidebar ul li a {
    color: white;
    text-decoration: none;
    display: block;
}

.sidebar ul li a:hover {
    background-color: #575757;
}

.content {
    margin-left: 210px;
    padding: 20px;
}

.chat-container {
    display: flex;
    flex-direction: column;
    height: 80vh;
    max-width: 600px;
    margin: 0 auto;
}

.chatbox {
    flex: 1;
    border: 1px solid #ccc;
    padding: 10px;
    overflow-y: scroll;
    margin-bottom: 10px;
}

.input-container {
    display: flex;
}

.input-container input {
    flex: 1;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 4px;
}

.input-container button {
    padding: 10px 20px;
    border: none;
    background-color: #007BFF;
    color: white;
    border-radius: 4px;
    margin-left: 10px;
    cursor: pointer;
}

.input-container button:hover {
    background-color: #0056b3;
}

.user-message, .bot-message {
    margin: 10px 0;
    padding: 10px;
    border-radius: 4px;
}

.user-message {
    background-color: #e1ffc7;
    text-align: right;
}

.bot-message {
    background-color: #f1f1f1;
    text-align: left;
}
</style>

{% block title %}Chatbot{% endblock %}

{% block content %}
    <h1>Finance Chatbot</h1>
    <div class="chat-container">
        <div class="chatbox" id="chatbox">
            <!-- Chat messages will be displayed here -->
        </div>
        <div class="input-container">
            <input type="text" id="userInput" placeholder="Type your message here...">
            <button onclick="sendMessage()">Send</button>
        </div>
    </div>

    <script>
        async function sendMessage() {
            const userInput = document.getElementById('userInput').value;
            const response = await fetch('/chatbot', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ message: userInput })
            });
            const data = await response.json();
            document.getElementById('chatbox').innerHTML += `<div class="user-message"><strong>You:</strong> ${userInput}</div>`;
            document.getElementById('chatbox').innerHTML += `<div class="bot-message"><strong>Bot:</strong> ${data.response}</div>`;
            document.getElementById('userInput').value = '';
        }
    </script>
{% endblock %}